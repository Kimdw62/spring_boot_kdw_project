<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="edu.sejong.ex.mapper.BoardMapper">

    <select id="getList" resultType="BoardVO">
    <![CDATA[
        select * from mvc_board order by bGroup desc, bStep
    ]]>
    </select>

    <select id="read" resultType="BoardVO">
    <![CDATA[
        select * from mvc_board where bid = #{bno}
    ]]>
    </select>

    <insert id="insertBoard" parameterType="BoardVO">
    <![CDATA[
		insert into mvc_board(bId, bName, bTitle, bContent, bHit, bGroup, bStep, bIndent)
			values (mvc_board_seq.nextval, #{bname}, #{btitle}, #{bcontent}, 0, mvc_board_seq.currval, 0, 0)
    ]]>
    </insert>

    <insert id="insertReply" parameterType="BoardVO">
    <![CDATA[
		insert into mvc_board(bId, bName, bTitle, bContent, bHit, bGroup, bStep, bIndent)
			values(mvc_board_seq.nextval, #{bname}, #{btitle}, #{bcontent}, 0, #{bGroup}, #{bStep}, #{bIndent})
    ]]>
    </insert>

    <update id="updateBoard" parameterType="BoardVO">
    <![CDATA[
		update mvc_board set bname = #{bname}, btitle = #{btitle}, bcontent = #{bcontent}
		where bid = #{bid}
    ]]>
    </update>

    <update id="updateShape" parameterType="BoardVO">
    <![CDATA[
		update mvc_board set bStep = bStep + 1 where bGroup = #{bgroup} and bStep > #{bstep}
    ]]>
    </update>

    <delete id="delete">
    <![CDATA[
    	 delete from mvc_board where bid = #{bid}
    ]]>
    </delete>

</mapper>


<!-- BoardMapper 기준  -->


